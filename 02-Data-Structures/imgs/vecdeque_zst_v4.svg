<?xml version="1.0" encoding="UTF-8"?>
<svg width="800" height="350" viewBox="0 0 800 350" fill="none" xmlns="http://www.w3.org/2000/svg" shape-rendering="geometricPrecision" text-rendering="geometricPrecision">
<rect width="800" height="350" rx="15" fill="#f8f9fa"/>
<defs>
<style>
.label { font-family: 'JetBrains Mono', monospace; font-size: 11px; fill: #546e7a; }
.value { font-family: 'JetBrains Mono', monospace; font-size: 11px; font-weight: bold; fill: #333; }
.header { font-family: 'JetBrains Mono', monospace; font-size: 14px; font-weight: bold; fill: #1565c0; }
.heap-header { font-family: 'JetBrains Mono', monospace; font-size: 14px; font-weight: bold; fill: #9e9e9e; }
.sub-header { font-family: 'JetBrains Mono', monospace; font-size: 10px; font-weight: bold; fill: #7b1fa2; }
.title { font-family: 'JetBrains Mono', monospace; font-size: 22px; font-weight: bold; fill: #333333; }
.annotation { font-family: 'JetBrains Mono', monospace; font-size: 12px; fill: #9e9e9e; }
.ghost-text { font-family: 'JetBrains Mono', monospace; font-size: 16px; fill: #78909c; font-style: italic; }
</style>
<marker id="arrowhead" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
<polygon points="0 0, 10 3.5, 0 7" fill="#ff9800" />
</marker>
</defs>
<text x="400" y="45" text-anchor="middle" class="title">VecDeque ZST (零大小类型) 幽灵布局</text>
<!-- Stack Area -->
<g transform="translate(50, 80)">
<rect width="240" height="240" rx="12" fill="#ffffff" stroke="#e0e0e0" stroke-width="1"/>
<rect width="240" height="30" rx="12 12 0 0" fill="#e3f2fd"/>
<text x="120" y="20" text-anchor="middle" class="header">Stack (VecDeque: 32 字节)</text>
<g transform="translate(15, 45)">
<rect width="210" height="180" rx="8" fill="#ffffff" stroke="#ef5350" stroke-width="2"/>
<!-- head field -->
<g transform="translate(10, 15)">
<rect width="190" height="25" rx="4" fill="#ffffff" stroke="#e0e0e0"/>
<text x="8" y="16" class="label">head</text>
<text x="182" y="16" class="value" text-anchor="end">0</text>
</g>
<!-- len field -->
<g transform="translate(10, 45)">
<rect width="190" height="25" rx="4" fill="#ffffff" stroke="#e0e0e0"/>
<text x="8" y="16" class="label">len</text>
<text x="182" y="16" class="value" text-anchor="end">1,000,000</text>
</g>
<!-- buf (RawVec) -->
<g transform="translate(10, 75)">
<rect width="190" height="95" rx="4" fill="#f3e5f5" stroke="#9c27b0" stroke-dasharray="2 2"/>
<text x="8" y="14" class="sub-header">buf: RawVec</text>
<!-- ptr -->
<g transform="translate(5, 20)">
<rect width="180" height="25" rx="3" fill="#fff8e1" stroke="#ff9800"/>
<text x="8" y="16" class="label">ptr</text>
<text x="172" y="16" class="value" text-anchor="end" fill="#f57c00">NonNull::dangling()</text>
</g>
<!-- cap -->
<g transform="translate(5, 50)">
<rect width="180" height="25" rx="3" fill="#ffffff" stroke="#e0e0e0"/>
<text x="8" y="16" class="label">cap</text>
<text x="172" y="16" class="value" text-anchor="end">usize::MAX</text>
</g>
<!-- alloc -->
<g transform="translate(5, 80)">
<text x="5" y="10" class="label" style="font-style: italic;">alloc: Global</text>
</g>
</g>
</g>
</g>
<!-- Heap Area (Empty) -->
<g transform="translate(340, 80)">
<rect width="410" height="240" rx="12" fill="#ffffff" stroke="#e0e0e0" stroke-width="1" stroke-dasharray="8 4"/>
<rect width="410" height="30" rx="12 12 0 0" fill="#eeeeee"/>
<text x="205" y="20" text-anchor="middle" class="heap-header">Heap (堆: 0 字节消耗)</text>
<text x="205" y="110" text-anchor="middle" class="ghost-text">没有物理内存分配</text>
<text x="205" y="140" text-anchor="middle" class="annotation">因为 size_of::&lt;T&gt;() == 0</text>
</g>
<!-- Logic Arrow -->
<path d="M260 232.5 L340 232.5" stroke="#ff9800" stroke-width="2" stroke-dasharray="4 2" marker-end="url(#arrowhead)"/>
<text x="300" y="222.5" text-anchor="middle" class="label" fill="#ff9800">虚空指针</text>
</svg>
