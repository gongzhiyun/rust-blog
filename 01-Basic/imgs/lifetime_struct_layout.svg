<?xml version="1.0" encoding="UTF-8"?>
<svg width="800" height="400" viewBox="0 0 800 400" fill="none" xmlns="http://www.w3.org/2000/svg" shape-rendering="geometricPrecision" text-rendering="geometricPrecision">
    <!-- Background -->
    <rect width="800" height="400" rx="15" fill="#f8f9fa"/>
    
    <!-- Title -->
    <text x="400" y="35" text-anchor="middle" font-family="JetBrains Mono, monospace" font-size="22" font-weight="bold" fill="#333333">结构体生命周期：自洽的引用约束</text>

    <!-- Stack -->
    <g transform="translate(50, 70)">
        <rect width="320" height="280" rx="12" fill="#ffffff" stroke="#e0e0e0" stroke-width="1"/>
        <path d="M0 12C0 5.37258 5.37258 0 12 0H308C314.627 0 320 5.37258 320 12V35H0V12Z" fill="#e3f2fd"/>
        <text x="160" y="23" text-anchor="middle" font-family="JetBrains Mono, monospace" font-size="14" font-weight="bold" fill="#1565c0">Stack (栈)</text>

        <!-- Struct Instance -->
        <g transform="translate(20, 60)">
            <rect width="280" height="180" rx="8" fill="#fafafa" stroke="#1565c0" stroke-width="2"/>
            <text x="140" y="-10" text-anchor="middle" font-family="JetBrains Mono, monospace" font-size="12" font-weight="bold" fill="#1565c0">struct ImportantExcerpt&lt;'a&gt;</text>
            
            <!-- part field -->
            <rect x="20" y="30" width="240" height="40" rx="4" fill="#fff8e1" stroke="#ff9800"/>
            <text x="30" y="55" font-family="JetBrains Mono, monospace" font-size="12" fill="#333333">part: &amp;'a str</text>
            <circle cx="240" cy="50" r="3" fill="#ff9800"/>
            
            <!-- other fields -->
            <rect x="20" y="85" width="240" height="40" rx="4" fill="#ffffff" stroke="#e0e0e0"/>
            <text x="30" y="110" font-family="JetBrains Mono, monospace" font-size="12" fill="#999999">... other data ...</text>

            <!-- Constraint text -->
            <text x="140" y="160" text-anchor="middle" font-family="JetBrains Mono, monospace" font-size="11" fill="#c62828" font-style="italic">"只要结构体活着，'a 必须有效"</text>
        </g>
    </g>

    <!-- Heap -->
    <g transform="translate(430, 70)">
        <rect width="320" height="280" rx="12" fill="#ffffff" stroke="#e0e0e0" stroke-width="1"/>
        <path d="M0 12C0 5.37258 5.37258 0 12 0H308C314.627 0 320 5.37258 320 12V35H0V12Z" fill="#e8f5e9"/>
        <text x="160" y="23" text-anchor="middle" font-family="JetBrains Mono, monospace" font-size="14" font-weight="bold" fill="#2e7d32">Heap (堆) - 生命周期 'a 的来源</text>

        <!-- String Data -->
        <rect x="40" y="80" width="240" height="60" rx="4" fill="#ffffff" stroke="#4caf50" stroke-width="2"/>
        <text x="50" y="115" font-family="JetBrains Mono, monospace" font-size="14" fill="#333333">"I could not stop..."</text>
        <text x="160" y="165" text-anchor="middle" font-family="JetBrains Mono, monospace" font-size="11" fill="#4caf50">实际的数据所有者 (String)</text>
    </g>

    <!-- Pointer -->
    <path d="M310 120 C 350 120, 390 120, 470 120" stroke="#ff9800" stroke-width="2" marker-end="url(#arrow-orange)"/>

    <!-- Arrow Definition -->
    <defs>
        <marker id="arrow-orange" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
            <polygon points="0 0, 10 3.5, 0 7" fill="#ff9800" />
        </marker>
    </defs>
</svg>