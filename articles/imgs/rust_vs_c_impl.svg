<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 520">
  <rect width="800" height="520" fill="#f8f9fa"/>
  <!-- Title -->
  <text x="400" y="40" font-family="JetBrains Mono, monospace" font-size="22" font-weight="bold" fill="#333" text-anchor="middle">Rust impl vs C Functions: 同源异形</text>
  
  <!-- C Language Section -->
  <rect x="50" y="70" width="320" height="180" rx="10" fill="#fff" stroke="#78909c" stroke-width="2"/>
  <text x="210" y="100" font-family="JetBrains Mono, monospace" font-size="18" font-weight="bold" fill="#78909c" text-anchor="middle">C 语言 (面向过程)</text>
  <text x="70" y="135" font-family="JetBrains Mono, monospace" font-size="14" fill="#333" xml:space="preserve">struct Point { int x, y; };</text>
  <text x="70" y="165" font-family="JetBrains Mono, monospace" font-size="14" fill="#ef5350" font-weight="bold" xml:space="preserve">// 函数与数据在命名空间上分离</text>
  <text x="70" y="190" font-family="JetBrains Mono, monospace" font-size="14" fill="#333" xml:space="preserve">void point_distance(Point* p) {</text>
  <text x="70" y="215" font-family="JetBrains Mono, monospace" font-size="14" fill="#333" xml:space="preserve">  // ...</text>
  <text x="70" y="240" font-family="JetBrains Mono, monospace" font-size="14" fill="#333" xml:space="preserve">}</text>

  <!-- Rust Language Section -->
  <rect x="430" y="70" width="320" height="180" rx="10" fill="#fff" stroke="#9c27b0" stroke-width="2"/>
  <text x="590" y="100" font-family="JetBrains Mono, monospace" font-size="18" font-weight="bold" fill="#9c27b0" text-anchor="middle">Rust (零成本抽象)</text>
  <text x="450" y="135" font-family="JetBrains Mono, monospace" font-size="14" fill="#333" xml:space="preserve">struct Point { x: i32, y: i32 }</text>
  <text x="450" y="165" font-family="JetBrains Mono, monospace" font-size="14" fill="#4caf50" font-weight="bold" xml:space="preserve">// 语法上聚合，物理上分离</text>
  <text x="450" y="190" font-family="JetBrains Mono, monospace" font-size="14" fill="#333" xml:space="preserve">impl Point {</text>
  <text x="450" y="215" font-family="JetBrains Mono, monospace" font-size="14" fill="#333" xml:space="preserve">  fn distance(&amp;self) { ... }</text>
  <text x="450" y="240" font-family="JetBrains Mono, monospace" font-size="14" fill="#333" xml:space="preserve">}</text>

  <!-- Commentary (Middle) -->
  <rect x="250" y="270" width="300" height="80" rx="10" fill="#fff8e1" stroke="#ff9800"/>
  <text x="400" y="300" font-family="JetBrains Mono, monospace" font-size="14" font-weight="bold" fill="#ff9800" text-anchor="middle">现代化语义包装</text>
  <text x="400" y="325" font-family="JetBrains Mono, monospace" font-size="12" fill="#333" text-anchor="middle">更好的封装、作用域与语法糖</text>
  <text x="400" y="340" font-family="JetBrains Mono, monospace" font-size="12" fill="#333" text-anchor="middle">但物理上依然保持分离</text>

  <!-- Assembly Section (Bottom) -->
  <rect x="250" y="380" width="300" height="100" rx="10" fill="#333" stroke="#000"/>
  <text x="400" y="410" font-family="JetBrains Mono, monospace" font-size="16" font-weight="bold" fill="#fff" text-anchor="middle">汇编/机器码 (底层的统一)</text>
  <text x="270" y="440" font-family="JetBrains Mono, monospace" font-size="14" fill="#4caf50" xml:space="preserve">call _distance  ; 传入指针作为参数</text>
  <text x="400" y="465" font-family="JetBrains Mono, monospace" font-size="12" fill="#78909c" text-anchor="middle">结论：两者在 CPU 眼里完全一致</text>

  <!-- Compilation Arrows (Avoid Middle Box) -->
  <path d="M 210 250 L 210 430 L 250 430" fill="none" stroke="#78909c" stroke-width="2" stroke-dasharray="4,2" marker-end="url(#arrowhead-gray)"/>
  <path d="M 590 250 L 590 430 L 550 430" fill="none" stroke="#9c27b0" stroke-width="2" stroke-dasharray="4,2" marker-end="url(#arrowhead-purple)"/>

  <!-- Markers -->
  <defs>
    <marker id="arrowhead-gray" markerWidth="10" markerHeight="7" refX="0" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#78909c"/>
    </marker>
    <marker id="arrowhead-purple" markerWidth="10" markerHeight="7" refX="0" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#9c27b0"/>
    </marker>
  </defs>
</svg>