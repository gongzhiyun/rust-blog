<?xml version="1.0" encoding="UTF-8"?>
<svg width="800" height="500" viewBox="0 0 800 500" xmlns="http://www.w3.org/2000/svg">
<rect width="800" height="500" fill="#f8f9fa" rx="12"/>
<text x="400" y="40" font-family="JetBrains Mono, monospace" font-size="22" font-weight="bold" fill="#333" text-anchor="middle">深度对比：泛型参数 vs 关联类型</text>
<!-- 泛型：多重映射 (Multiple Implementations) -->
<g transform="translate(40, 70)">
<rect width="340" height="380" fill="#ffffff" stroke="#e0e0e0" stroke-width="2" rx="10"/>
<text x="170" y="35" font-family="JetBrains Mono, monospace" font-size="16" font-weight="bold" fill="#ef5350" text-anchor="middle">泛型方式 (Input Types)</text>
<rect x="20" y="60" width="300" height="70" fill="#ffebee" stroke="#ef5350" rx="6"/>
<text x="35" y="90" font-family="JetBrains Mono, monospace" font-size="13" fill="#333">trait Graph&lt;N, E&gt; { ... }</text>
<text x="35" y="115" font-family="JetBrains Mono, monospace" font-size="11" fill="#455a64">类型 N 和 E 是 Trait 的“输入”参数</text>
<!-- 关系图 -->
<circle cx="80" cy="180" r="25" fill="#e3f2fd" stroke="#2196f3" stroke-width="2"/>
<text x="80" y="185" font-family="JetBrains Mono, monospace" font-size="12" fill="#333" text-anchor="middle">Struct</text>
<path d="M105 180 L230 160" stroke="#ef5350" stroke-width="1.5" stroke-dasharray="4" marker-end="url(#arrow-red)"/>
<path d="M105 180 L230 200" stroke="#ef5350" stroke-width="1.5" stroke-dasharray="4" marker-end="url(#arrow-red)"/>
<rect x="240" y="145" width="80" height="30" fill="#ffebee" stroke="#ef5350" rx="4"/>
<text x="280" y="165" font-family="JetBrains Mono, monospace" font-size="10" fill="#333" text-anchor="middle">u32, i32</text>
<rect x="240" y="185" width="80" height="30" fill="#ffebee" stroke="#ef5350" rx="4"/>
<text x="280" y="205" font-family="JetBrains Mono, monospace" font-size="10" fill="#333" text-anchor="middle">f64, String</text>
<text x="170" y="240" font-family="JetBrains Mono, monospace" font-size="11" fill="#455a64" text-anchor="middle">同一个类型可以有多种 Graph 实现</text>
<!-- 签名影响 -->
<rect x="20" y="260" width="300" height="90" fill="#fafafa" stroke="#b0bec5" rx="6"/>
<text x="35" y="285" font-family="JetBrains Mono, monospace" font-size="12" font-weight="bold" fill="#333">签名污染 (Type Pollution):</text>
<text x="35" y="310" font-family="JetBrains Mono, monospace" font-size="11" fill="#c62828">fn process&lt;N, E, G&gt;(g: G)</text>
<text x="35" y="330" font-family="JetBrains Mono, monospace" font-size="11" fill="#c62828">where G: Graph&lt;N, E&gt;</text>
</g>
<!-- 关联类型：唯一映射 (Encapsulated Output) -->
<g transform="translate(420, 70)">
<rect width="340" height="380" fill="#ffffff" stroke="#e0e0e0" stroke-width="2" rx="10"/>
<text x="170" y="35" font-family="JetBrains Mono, monospace" font-size="16" font-weight="bold" fill="#2e7d32" text-anchor="middle">关联类型 (Output Types)</text>
<rect x="20" y="60" width="300" height="70" fill="#e8f5e9" stroke="#4caf50" rx="6"/>
<text x="35" y="90" font-family="JetBrains Mono, monospace" font-size="13" fill="#333">trait Graph { type N; type E; }</text>
<text x="35" y="115" font-family="JetBrains Mono, monospace" font-size="11" fill="#455a64">类型 N 和 E 是 Trait 的“输出”结果</text>
<!-- 关系图 -->
<circle cx="80" cy="180" r="25" fill="#e3f2fd" stroke="#2196f3" stroke-width="2"/>
<text x="80" y="185" font-family="JetBrains Mono, monospace" font-size="12" fill="#333" text-anchor="middle">Struct</text>
<path d="M105 180 L235 180" stroke="#4caf50" stroke-width="2" marker-end="url(#arrow-green)"/>
<rect x="240" y="165" width="80" height="30" fill="#e8f5e9" stroke="#4caf50" rx="4"/>
<text x="280" y="185" font-family="JetBrains Mono, monospace" font-size="10" fill="#333" text-anchor="middle">u32, i32</text>
<text x="170" y="240" font-family="JetBrains Mono, monospace" font-size="11" fill="#455a64" text-anchor="middle">每个类型只有唯一的 Graph 实现</text>
<!-- 签名影响 -->
<rect x="20" y="260" width="300" height="90" fill="#fafafa" stroke="#b0bec5" rx="6"/>
<text x="35" y="285" font-family="JetBrains Mono, monospace" font-size="12" font-weight="bold" fill="#333">清晰签名 (Clean Signature):</text>
<text x="35" y="310" font-family="JetBrains Mono, monospace" font-size="11" fill="#2e7d32">fn process&lt;G: Graph&gt;(g: G)</text>
<text x="35" y="330" font-family="JetBrains Mono, monospace" font-size="11" fill="#455a64">// N 和 E 已被封装在 G 内部</text>
</g>
<!-- 底部总结 -->
<rect x="40" y="460" width="720" height="30" fill="#fff8e1" stroke="#ff9800" rx="6"/>
<text x="400" y="480" font-family="JetBrains Mono, monospace" font-size="12" font-weight="bold" fill="#ff9800" text-anchor="middle">核心原则：若实现具有唯一性（如 Iterator 只能有一种 Item），优先使用关联类型。</text>
<!-- 定义箭头 -->
<defs>
<marker id="arrow-red" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
<polygon points="0 0, 10 3.5, 0 7" fill="#ef5350"/>
</marker>
<marker id="arrow-green" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
<polygon points="0 0, 10 3.5, 0 7" fill="#4caf50"/>
</marker>
</defs>
</svg>